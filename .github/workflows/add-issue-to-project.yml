name: Add Issue to Project

on:
  issues:
    types:
      - opened

env:
  PROJECT_URL: https://github.com/users/Ojoxux/projects/1

jobs:
  add-to-project:
    name: Add Issue to Project
    runs-on: ubuntu-latest
    steps:
      - name: Add Issue to Project
        uses: actions/add-to-project@v0.5.0
        id: add-to-project
        with:
          # Ojoxux/Sonoryリポジトリ用のプロジェクトURL
          # プロジェクト番号は env.PROJECT_URL で管理
          project-url: ${{ env.PROJECT_URL }}
          github-token: ${{ secrets.PROJECT_PAT }}
          
      # デフォルトで「💡 アイデア」ステータスを設定
      - name: Set Default Status
        if: success()
        uses: titoportas/update-project-fields@v0.1.0
        with:
          project-url: ${{ env.PROJECT_URL }}
          github-token: ${{ secrets.PROJECT_PAT }}
          item-id: ${{ steps.add-to-project.outputs.itemId }}
          field-keys: Status
          field-values: "💡 アイデア" 